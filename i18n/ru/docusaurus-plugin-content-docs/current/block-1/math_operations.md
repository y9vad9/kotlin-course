---
id: math_operations
---
# Математические операции в Kotlin
Что ж, мы рассмотрели почву, на которой уже может строиться программа.
Ранее мы уже рассматривали одну из встроенных функций – `println`. Эта функция печатала в наш терминал (консоль) текст, который мы ему задавали.
Рассмотрим и другие.
Перейдем к задаче: нам нужно написать программу, которая будет умножать введенные пользователем цифры. Достаточно просто.
:::tip Подсказка
Для того чтобы получить данные ввода от пользователя, нам
потребуется функция `readln(): String`, читающая ввод пользователя из консоли.
Она встроена в язык, и, как уже можно было заметить, возвращает строку.
:::
То есть, у нас будет что-то вроде:
```kotlin
fun main() {
	val number1: Int = readln()
	val number2: Int = readln()
	println(number1 * number2)
}
```
Вот и вся программа! Но, попытавшись ее запустить, мы получим ошибку:
```
Type mismatch: inferred type is String but Int was expected
```
Переведя на украинский язык мы получим следующее:
`Несоответствие типов: предполагаемый тип - String, но ожидался Int.`
Что это значит? Это означает, что нашим переменным `number1` и `number2` типа `Int` (целые числа)
задается неподходящий тип `String` (строка, aka обычный текст).
:::caution Внимание
К сожалению, поскольку ввод пользователя может быть любым: от цифр, до букв и любых других символов,
функция `readln()` возвращает тип `String` (строка, которая может содержать не только цифры).

Чтобы это исправить, мы должны превратить строку в целое число (ну правда, желательно, перед этим проверить ввод пользователя).
В Kotlin есть функция `toInt()` для строк (aka текста), что очень облегчает нам жизнь. Она конвертирует строчку в цифру.
:::
```kotlin
fun main() {
	val number1: Int = readln().toInt()
	val number2: Int = readln().toInt()
	println(number1 * number2)
}
```
:::tip Интересно знать
Подобные функции также существуют и для других типов чисел:
- `String.toDouble()`
- `String.toShort()`
- `String.toFloat()`
- `String.toLong()`

Также схожие функции есть и меж числами. Например, целое число может превращаться в число с плавающей точкой (aka с запятой, типа 'Double').
Зачем это нужно? Ну, например, вам нужно составить одно целое и одно число с плавающей точкой.
:::
Поскольку Kotlin – это строго-типизированный язык, просто так составить цифры разных типов не получится. В зависимости от того, что вам нужно, вы можете привести число с плавающей точкой в ​​целое и обратно.
```kotlin
val x = readln().toInt()
val y = readln().toDouble()
val double: Double = x.toDouble() + y
println(double)
val integer: Int = x + y.toInt()
println(integer)
```
Вообще, если вы попытаетесь сложить `x+y` без преобразований, Kotlin будет автоматически выводить тип `Double`. Но, под капотом, делается то, что мы только что рассмотрели. Но подобное работает только с числами.
```kotlin
val x = readln().toInt()
val y = readln().toDouble()
val result: Double = x + y
println(result)
```
:::tip Интересно знать
Кстати, функция `println` также выводит строчку в консоль. А мы ей отдаем число. Почему для нее таких ограничений нет?
Все просто: функция `println` принимает тип `Any` (т.е. любой тип данных) и неявно вызывает на этом типе `toString()`
(такая же встроенная функция в язык, применяемый на любой созданный объект),
что возвращает строчку с нашей цифрой.
Внутри там что-то вроде:
```kotlin
fun println(value: Any) {
	val string: String = value.toString()
	// ...
}
```
:::

Какие еще интересные функции есть?
Давайте, решим следующую задачу, заодно упомянув об условных операторах:
$$
f(x) =\left\{
  \begin{array}{ c l }
3x & \quad \textrm{если } x < 0
\\
    x^{5} & \quad \textrm{если } x \geq 1
\le 100
\\
    \sqrt{x} & \quad \textrm{иначе}
  \end{array}
\right.
$$
И здесь мы видим степень! Что ж, зная, что такое степень, несложно решить эту задачку.

*Я предпочитаю более двух ветвей с условиями, использовать `when`.*
```kotlin
fun f(x: Double) {
	return when {
		x<0 -> 3*x
		x >= 1 && x <= 100 -> x * x * x * x * x
		else -> ? // что здесь?
	}
}
```
Если со степенью мы разобрались, то что нам делать с корнем?
:::tip Подсказка
Чтобы получить корень от какого-то числа, мы можем воспользоваться функцией `sqrt(x: Double)`.
:::
В результате у нас будет следующее:
```kotlin
import kotlin.math.sqrt

fun f(x: Double) {
	return when {
		x<0 -> 3*x
		x >= 1 && x <= 100 -> x * x * x * x * x
		else -> sqrt(x)
	}
}
```
И наша задача решена! Но если мы говорим о встроенных функциях, то наверняка есть также какое-то упрощение для степени?
Особенно, если думать о том, что было бы, если степень была бы больше.
Да, упрощение есть.
:::tip Подсказка
Для того чтобы подвести число к степени, мы можем воспользоваться функцией `Int.pow(times: Int)`.
:::
Можно сделать следующим образом:
```kotlin
import kotlin.math.sqrt
import kotlin.math.pow

fun f(x: Double) {
	return when {
		x<0 -> 3*x
		x >= 1 && x <= 100 -> x.pow(5)
		else -> sqrt(x)
	}
}
```
Очень удобно! Особенно если у нас произвольная степень.
Давайте же выведем результат в консоль:
```kotlin
fun main() {
	val input: Double = readln().toDouble()
	val output: String = f(input).toString()
	println(output)
}
```
:::info Задание
Выполните следующее выражение на языке Kotlin:
$$
f(x) =\left\{
\begin{array}{ c l }
3x^{10} & \quad \textrm{если } x \geq 1
\le 20
\\
\sqrt{x} & \quad \textrm{если } x > 20 \le 100
\\
\lvert x^{3} \rvert & \quad \textrm{иначе}
\end{array}
\right.
$$
:::
С нового, мы здесь видим модуль (или абсолютное число). Если вы не знакомы с
понятием абсолютного числа или модуля, то не беспокойтесь. Все что вам нужно знать –
это то, что условное $\lvert y \rvert$ всегда возвращает положительное (не минусовое) число.
:::tip Подсказка
Эту задачу можно решить несколькими способами. Один из вариантов следует из базового правила
математики: **минус на минус, всегда дает плюс**.

То есть, имея отрицательное число, все что нам нужно, это добавить к нему еще один минус:
```kotlin
val negativeNumber = -1
val positiveNumber = -negativeNumber // эта переменная уже имеет положительное значение.
```
С помощью этого правила можно перевернуть число, но не забудьте проверить
или число вообще минусовое (отрицательное).

То есть, можно сделать следующее:
```kotlin
fun absoluteNumber(x: Int): Int {
    return if(x < 0) // проверяем число ли вообще минусовое
        -x // число минусовое, переворачиваем
    else x // число положительное, оставляем как есть
}
```
Вот мы и сделали аналог функции `abs(x: Double)` из встроенной библиотеки математических функций
Kotlin. Мы можем использовать то, что мы написали, но примем готовый вариант.
:::
Итак, пользуясь знаниями о `when` и функциях `pow`, `sqrt`, `abs` выполним задачу:
```kotlin
import kotlin.math.sqrt
import kotlin.math.pow
import kotlin.math.abs

fun f(x: Double): Double {
    return when {
        x >= 1 <= 20 -> 3 * x.pow(10)
        x > 20 <= 100 -> sqrt(x)
        else -> abs(x.pow(3))
    }
}
```
И так несложно мы решили эту задачу.
:::info Другие функции
И по другим интересным функциям, хотелось бы отметить следующие:
- `max(x: Double, y: Double)` – возвращает максимальное число между x и y.
- `min(x: Double, y: Double)` – возвращает максимальное число между x и y.
:::
Подобных функций достаточно много, поэтому мы будем их рассматривать при прохождении других тем.